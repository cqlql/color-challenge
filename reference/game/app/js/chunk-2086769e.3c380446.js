(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2086769e"],{1639:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{attrs:{id:"huePage"}},[s("NavTag"),e._e(),s("img",{staticStyle:{display:"none"},attrs:{src:"https://static.qtccolor.com/game/img/hue_test_ico.jpg"}}),s("div",{staticClass:"game"},[e.pageLoging?e._e():s("div",{staticClass:"game-canvas",style:"width:"+e.pageWidth+"px"},[s("canvas",{style:e.canvasStyle,attrs:{id:e.canvasId,width:e.pageWidth,height:e.pageWidth}})]),0==e.state?s("div",{staticClass:"game-control"},[s("button",{staticClass:"start gradient1",on:{click:e.init}},[e._v("这就开始")])]):e._e(),2==e.state||3==e.state?s("div",{staticClass:"score"},[s("div",{staticClass:"scoreTitle",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[s("img",{staticClass:"head-img",attrs:{src:e.login_headImg}}),e._v(" 你的评分："+e._s(e.showScore)+" "),e.topscore>0?s("div",{staticClass:"font-mini"},[e._v("历史最高分："+e._s(e.topscore))]):e._e(),s("div",{staticClass:"font-mini"},[e._v("0为最低分，1000为最高分")])]),s("div",{staticClass:"scoreDesc"},[e.allScore>0?s("div",[e._v(e._s(e.weaknessText()))]):e._e(),s("div",[e._v("用时："+e._s(e.showTime))]),s("div",[e._v("总结："+e._s(e.Remark()))])])]):e._e(),2==e.state||3==e.state?s("div",{staticClass:"font-mini grey1 margintop"},[e._v(" 使用声明： 本色棋测试由计算机模拟的颜色，在不同设备上显示有所区别，实际测试中请以实物色棋为准！ ")]):e._e(),1==e.state?s("div",{staticClass:"game-control"},[s("button",{staticClass:"prev",style:e.prevBtnColor,on:{click:e.prev}},[e._v("上一关")]),s("div",{staticClass:"level"},[e._v(e._s(e.level)+"/"+e._s(e.maxLevel))]),s("button",{staticClass:"next",style:e.nextBtnColor,on:{click:e.next}},[e._v("下一关")]),e.level==e.maxLevel?s("button",{staticClass:"submit gradient1",on:{click:e.submit}},[e._v("提交测试")]):e._e()]):e._e(),2==e.state?s("div",{staticClass:"game-control"},[s("button",{staticClass:"submit gradient1",on:{click:e.showWrong}},[e._v("查看答案")]),s("button",{staticClass:"submit gradient1",on:{click:e.showWelcome}},[e._v("重新测试")])]):e._e(),3==e.state?s("div",{staticClass:"game-control"},[s("button",{staticClass:"prev",style:e.prevBtnColor,on:{click:e.prev}},[e._v("上一关")]),s("div",{staticClass:"level"},[e._v(e._s(e.level)+"/"+e._s(e.maxLevel))]),e.level!=e.maxLevel?s("button",{staticClass:"next",style:e.nextBtnColor,on:{click:e.next}},[e._v("下一关")]):e._e(),e.level==e.maxLevel?s("button",{staticClass:"next",on:{click:e.submit}},[e._v("测试结果")]):e._e(),s("button",{staticClass:"submit gradient1",on:{click:e.showWelcome}},[e._v("重新测试")])]):e._e(),2==e.state||3==e.state?s("div",{staticClass:"margintop2",attrs:{id:"heroBox"}},[s("h4",[e._v("本月排行榜 "),e.refreshIntval>0?s("span",[e._v("数据将于"+e._s(e.refreshIntval)+"秒后刷新")]):e._e()]),s("div",{attrs:{id:"heroList"}},[s("ul",e._l(e.weekHero,(function(t,i){return s("li",{key:i},[s("div",{staticClass:"num"},[e._v("第"+e._s(i+1)+"名 "),s("img",{staticClass:"head-img",attrs:{src:t.headimgurl}})]),s("div",{staticClass:"nickname"},[e._v(e._s(t.nickname)+" ")]),s("div",{staticClass:"score2"},[e._v(e._s(t.score)+"分")])])})),0)])]):e._e(),e._e(),2==e.state||3==e.state?s("div",{staticClass:"qrcode"},[s("img",{attrs:{src:"/game/img/showqrcode.gif"}}),e._v(" 关注公众号更多好玩的游戏 ")]):e._e(),2==e.state||3==e.state?s("RewardTag"):e._e()],1),2==e.state||3==e.state?s("div",{staticClass:"ad"},[e._m(0)]):e._e()],1)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{attrs:{target:"_blank",href:"https://m.qtccolor.com/Product/CEP001.aspx?key=qtc&s=game"}},[s("img",{attrs:{src:"/game/img/ad_1.png"}})])}],o=s("7e6f"),n=s("b596");const r=6,l={arr:["#AB756D","#AA7469","#AA7365","#A77161","#A57260","#A4725C","#A47258","#A37356","#A27554","#A37752","#A37951","#A47B4E","#A27B49","#A17D48","#A28149","#9F844A","#9A8347","#9C8A4C","#9A8A4C","#95894C","#8E8F57","#8B9058","#88915C","#859360","#809262","#7E9566","#7E9568","#78966A","#75966C","#71986D","#6A9871","#699973","#699A77","#609877","#5A947A","#5B967E","#589681","#599784","#559685","#549988","#52968C","#50978F","#499892","#459995","#4B9997","#4B9898","#50999D","#5597A0","#5496A2","#5996A3","#5F95A5","#6695A4","#6792A5","#6C92A9","#6B8DA6","#7290AA","#728DA9","#768DAA","#788AA8","#7985A2","#8489A6","#8888A6","#8A88A4","#8F88A4","#9287A3","#9386A0","#98859F","#98849C","#9B8198","#A08298","#9D7C91","#A37E92","#A77E90","#A77B8C","#A87988","#AA7784","#AC7982","#AC757E","#AB757A","#A97375"],getChess(e){e||(e=20);let t=this.arr,s=[],i=1;for(let a=0;a<t.length;a+=e){let o=t.slice(a,a+e),n=[];for(let e=0;e<o.length;e++){let t={label:i,score:2,distance:1,color:o[e],labelColor:"#FFF"};i++,n.push(t)}s.push(n)}return s},RandDom(e){var t=[],s=e.slice(1,e.length-1);for(let i=0;i<s.length;i+=r){let e=s.slice(i,i+r);e.sort((function(){return.5-Math.random()})),e.forEach(e=>{t.push(e)})}return t.unshift(e[0]),t.push(e[e.length-1]),e.length=0,t.forEach(t=>{e.push(t)}),e},calcScore(e){let t=!1,s=!1,i=0;for(let a=0;a<e.length;a++)e[a].score=2,e[a].distance=1;for(let a=0;a<e.length;a++){const o=e[a];let n=null,r=null;t=0===a,s=a===e.length-1,s||(r=e[a+1]),t||(n=e[a-1]);let l=0,c=0;r&&(l=Math.abs(o.label-r.label),o.score+=l-1),n&&(c=Math.abs(o.label-n.label),o.score+=c-1),o.distance=l+c,o.score>2&&(i+=o.score-2),o.label-1!=a?o.labelColor="#f26060":o.labelColor="#fff"}return i}},c="Arial",h="#393939",d="#ccc",u="#868686",g="#f26060";(function(){var e=fabric.Canvas.prototype._onTouchStart;fabric.Object.prototype.objectCaching=!1,fabric.perfLimitSizeTotal=25e6,fabric.maxCacheSideLimit=8e3,fabric.util.object.extend(fabric.Canvas.prototype,{_onTouchStart:function(t){this.findTarget(t);this.allowTouchScrolling&&!this.isDrawingMode||e.call(this,t)}})})();const m={data(){return{options:{},lastChsPos:{top:0,left:0},allPosition:[],canvas:null,center:{},radius:0,minAngle:0,startAngle:0,centerCircleRadius:50,lockImgPath:"lock.svg",lockImgCache:null,arrowImgPath:"arrow_1.png",hue1ImgPath:"cir_1.png",hue2ImgPath:"cir_2.png",ImgBasePath:"https://static.qtccolor.com/game/img/",deep:[],isAutoScaleDeep:!1,isScroll:!1,chessGradient:{},colock_timer:0,clocker:{},startTime:0,showTime:""}},methods:{findChessByLabel(e){for(let t=0;t<this.options.chess.length;t++){const s=this.options.chess[t];if(s.label==e)return t}return null},getTargetByXy(e){var t=e.left,s=e.top,i=this.options.chess.length;let a=360/i/2;var o=Math.atan2(s-this.center.y,t-this.center.x)*(180/Math.PI);o>=-180&&o<=-90&&(o=360+o);for(let n=0;n<i;n++){const e=this.options.chess[n];if(o+a>=e.angle&&o-a<=e.angle)return e}},moveTo(e,t){e.top=t.y,e.left=t.x,e.setCoords()},getXY(e,t,s){return{x:e.x+s*Math.cos(t*Math.PI/180),y:e.y+s*Math.sin(t*Math.PI/180)}},render(e){const t=this;this.allPosition.length=0;var{width:s,chessSize:i}=e;this.options=e;let a=t.initCanvas(s);t.center;this.drawChessBackGroud(s);var o=this.MakeText("在线版色棋",{name:"title",top:this.center.y-40,fontSize:16,fontWeight:"bold",fill:d});a.add(o);o=this.MakeText("拖动色棋，按照色相排序\n分析你的色觉分辨颜色能力",{top:this.center.y,name:"tip"});a.add(o),this.clocker=this.MakeText(this.showTime,{name:"clock",top:this.center.y+40,cornerSize:4,fill:"#333",textBackgroundColor:d,fontFamily:c}),this.canvas.add(this.clocker),this.drawChess({isAddCanvas:!0,chessSize:i,chessStrokeSize:10,padding:i,labelOffset:-2*i,shadow:!0}),this.bindEvent()},renderResult(e){const t=this;this.allPosition.length=0;var{chess:s,width:i,chessSize:a}=e;this.options=e,t.initCanvas(i),this.drawChessBackGroud(i,h),this.drawGrid(),this.drawWave(),this.drawChess({showLock:!1,chessSize:a,chessStrokeSize:0,padding:1.6*a,labelOffset:-5,labelColor:"#fff",shadow:!1})},renderWelCome(e,t){const s=this;var{chess:i,chess2:a,width:o,chessSize:n}=e;this.options=e;const r=s.initCanvas(o);this.drawChessBackGroud(o,h),r.set({hoverCursor:"pointer"}),r.on("mouse:down",()=>{t&&t()});const l=o-3.2*n,c=o-100;let g={top:s.center.y,left:s.center.x,originX:"center",originY:"center",selectable:!1};var m=(e,t,s)=>{p(e,t,s)},p=(e,t,i)=>{e.animate("angle",t,{onChange:s.canvas.renderAll.bind(s.canvas),duration:i,easing:fabric.util.ease.easeInOutCirc,onComplete:()=>{m(e,t,i)}})},f=()=>{var e=new fabric.Group,t=new fabric.Group,o={top:s.center.y,left:s.center.x,originX:"center",originY:"right",width:l,height:l,centeredRotation:!0},r={chessAngle:0,isAddCanvas:!0,showLock:!1,chessSize:n,chessStrokeSize:8,padding:1.6*n,labelOffset:-n,shadow:!0},c={showLock:!1,isAddCanvas:!0,chessSize:12,chessStrokeSize:0,padding:50,labelOffset:-n,shadow:!0};for(let s=0;s<i.length;s++){const t=i[s];r.chessAngle+=s%2==0?90:6,e.add(this.drawChess_single(s,t,r))}this.minAngle=90;for(let s=0;s<a.length;s++){const e=a[s];t.add(this.drawChess_single(s,e,c))}e.set(o),t.set(o),e.getObjects().forEach(e=>{e.set({top:e.top-s.center.y,left:e.left-s.center.x})}),t.getObjects().forEach(e=>{e.set({top:e.top-s.center.y,left:e.left-s.center.x})});let h=15e3;p(e,"+=360",h),p(t,"-=360",h)};fabric.Image.fromURL(s.ImgBasePath+s.hue1ImgPath,e=>{e.set(g),e.scale(l/e.width),e.clone(e=>{}),r.add(e),f(),r.add(this.MakeText("在线版色棋",{top:this.center.y-40,fontSize:16,fontWeight:"bold",fill:d})),r.add(this.MakeText("10分钟内\n重组调色盘的颜色排序\n快来挑战色觉分辨颜色能力！",{top:this.center.y+10,fontSize:14,fill:u}))}),fabric.Image.fromURL(s.ImgBasePath+s.hue2ImgPath,e=>{for(let t=0;t<6;t++)e.clone(e=>{let s=c-c/7*t;e.set(g),e.scale(s/e.width),r.add(e)})})},MakeText(e,t){var s={name:"tip",selection:!1,selectable:!1,top:this.center.x,left:this.center.y,fontSize:12,textAlign:"center",lineHeight:1.2,fill:u,originX:"center",originY:"center"},i=new fabric.Text(e,Object.assign(s,t));return i},initCanvas(e){this.minAngle=360/this.options.chess.length,this.startAngle=this.minAngle-90,this.radius=e/2,this.center={x:this.radius,y:this.radius},this.canvas&&(this.canvas.clear(),this.canvas.dispose());let t=this.canvas=new fabric.Canvas(this.options.eleId,{isDrawingMode:!1,selection:!1,selectable:!1,hasBorder:!1,hasControls:!1,devicePixelRatio:!0,enableRetinaScaling:!0,width:e,height:e,renderOnAddRemove:!0,allowTouchScrolling:!1});return t},drawChessBackGroud(e,t){var s=new fabric.Rect({selection:!1,selectable:!1,top:this.center.y,left:this.center.x,width:e,height:e,rx:e,ry:e,name:"bg",fill:this.getGradient(e,"top","#424242","#393939"),originX:"center",originY:"center"});this.canvas.add(s)},drawGrid(){let e=this.centerCircleRadius,{chess:t,chessSize:s}=this.options,i=this.radius-2*s-6;for(let h=0;h<t.length;h++){t[h];let e=this.startAngle+h*this.minAngle,s=this.getXY(this.center,e,this.centerCircleRadius),a=this.getXY(this.center,e,i),o=new fabric.Line([s.x,s.y,a.x,a.y],{fill:u,stroke:u,strokeWidth:1,selectable:!1,evented:!1});this.canvas.add(o)}var a=16;if(this.isAutoScaleDeep){var o=0;let e=2;o=fabric.util.array.max(this.options.chess,"distance"),o=Math.max(14,o),e=2,this.deep.length=0;for(let t=0;t<o;t+=e)this.deep.push(t+e)}else for(let h=0;h<a;h+=2)this.deep.push(h+2);var n=n=fabric.util.array.max(this.deep);for(let h=0;h<this.deep.length;h++){var r=i*this.deep[h]/n;let e=new fabric.Circle({radius:r,left:this.center.x,top:this.center.y,fill:null,stroke:u,strokeWidth:1,selectable:!1,originX:"center",originY:"center"});this.canvas.add(e)}let l=new fabric.Circle({radius:e,left:this.center.x,top:this.center.y,fill:h,stroke:u,strokeWidth:1,selectable:!1,originX:"center",originY:"center"});this.canvas.add(l);let c=["红","红黄","黄绿","绿","绿蓝","蓝","蓝紫","紫红"],d=360/c.length;for(let h=0;h<c.length;h++){const t=c[h];let s=this.startAngle+h*d,i=this.getXY(this.center,s,e-10),a=this.getXY(this.center,s,10),o=this.getXY(this.center,s,e-20);var g=new fabric.Text(t+"",{selectable:!1,fill:u,top:i.y,left:i.x,originX:"center",originY:"center",fontSize:8});let n=new fabric.Line([a.x,a.y,o.x,o.y],{fill:u,stroke:u,strokeWidth:1,selectable:!1,evented:!1});this.canvas.add(n),this.canvas.add(g)}},drawWave(){let{chess:e,chessSize:t}=this.options,s=[],i=this.radius-this.centerCircleRadius-2*t,a=this.centerCircleRadius;const o=fabric.util.array.max(this.deep);let n=null;for(let l=0;l<e.length;l++){const t=e[l];let c=this.startAngle+l*this.minAngle;const h=l===e.length-1;if(t.distance>=2&&!h){let e=Math.max(t.distance,2)-2;var r=i*e/o;let l=this.getXY(this.center,c,a),h=this.getXY(l,c,r);n||(n=h),s.push(h.x),s.push(h.y)}else h&&(s.push(n.x),s.push(n.y));if(4==s.length){let e=new fabric.Line(s,{fill:g,stroke:g,strokeWidth:2,selectable:!1,evented:!1});this.canvas.add(e),s.shift(),s.shift()}}},drawChess(e){let{chess:t}=this.options;for(let s=0;s<t.length;s++){const i=t[s];this.drawChess_single(s,i,e)}},drawChess_single(e,t,s){const i=this;let a=this.canvas,{chess:o,showLabel:n,showScore:r,chessMove:l}=this.options,{isAddCanvas:c,showLock:h,chessSize:d,chessStrokeSize:u,padding:g,labelOffset:m,labelColor:p,shadow:f,chessAngle:v}=s;u+=d;let b=0==e||e==o.length-1;b=b&&0!=h;let w=0;w="undefined"!=typeof v?v:i.startAngle+e*i.minAngle;let C=i.getXY(this.center,w,i.radius-g),y=this.getXY(this.center,w,this.radius+m);t.sort=e,t.angle=w,this.allPosition.push(C);var _=new fabric.Rect({selectable:l&&!b,top:C.y,left:C.x,width:d,height:d,rx:d,ry:d,radius:d/2,index:e,fill:t.color,originX:"center",originY:"center",hasBorder:!1,hasControls:!1,chs:t}),k=new fabric.Rect({selectable:l&&!b,top:C.y,left:C.x,width:u,height:u,rx:u,ry:u,originX:"center",originY:"center",hasBorder:!1,hasControls:!1,shadow:f?new fabric.Shadow({blur:3,offsetY:0,offsetX:-2,color:"#1b1b1b"}):null,chs:t});k.set("fill",this.getGradient(k.width));var x=new fabric.Group([k,_],{selectable:l&&!b,hasBorders:!0,hasControls:!1,name:t.label,top:C.y,left:C.x,originX:"center",originY:"center",hoverCursor:"move",borderColor:t.color,borderDashArray:[4,4],borderScaleFactor:1,borderOpacityWhenMoving:0,chs:t,index:e});if(t.rect=x,(c||"undefined"==typeof c)&&a.add(x),b){var S={originX:"center",originY:"center",opacity:.3};i.lockImgCache?i.lockImgCache.clone(e=>{e.set({top:C.y,left:C.x,selectable:!1}),a.add(e)}):fabric.Image.fromURL(i.ImgBasePath+i.lockImgPath,e=>{e.set(S),e.set({top:C.y,left:C.x,selectable:!1}),e.scale(16/e.width),e.clone(e=>{i.lockImgCache=e}),a.add(e)})}if(n){var A=new fabric.Text(""+t.label,{selectable:!1,fill:p||t.labelColor,top:y.y,left:y.x,originX:"center",originY:"center",opacity:.8,fontSize:Math.round(.5*d)});a.add(A)}return x},getGradient(e,t,s,i){if(null==this.chessGradient[e]){let a;t=t||"left","left"==t?a={x1:e,y1:0,x2:0,y2:0}:"right"==t?a={x1:0,y1:0,x2:e,y2:0}:"top"==t?a={x1:0,y1:0,x2:0,y2:e}:"bottom"==t&&(a={x1:0,y1:e,x2:0,y2:0}),this.chessGradient[e]=new fabric.Gradient({type:"linear",gradientUnits:"pixels",coords:a,colorStops:[{offset:0,color:s||"#565656"},{offset:1,color:i||"#222222"}]})}return this.chessGradient[e]},bindEvent(){this.canvas.on("mouse:down",e=>{e.target}),this.canvas.on("object:moved",e=>{let t=e.target.chs,s=this.findChessByLabel(t.label);if(t.lastEmpty){this.moveTo(t.rect,this.allPosition[t.lastEmpty]),this.options.chess.sort((e,t)=>e.sort-t.sort);for(let e=0;e<this.options.chess.length;e++){const t=this.options.chess[e];console.log(t.label,t.sort)}l.calcScore(this.options.chess),this.render(this.options)}else this.moveTo(t.rect,this.allPosition[s]);t.lastEmpty=s}),this.canvas.on("object:moving",e=>{let t=e.target.chs,{left:s,top:i}=e.target,a=this.findChessByLabel(t.label),o=this.getTargetByXy({left:s,top:i});if(o&&o.label!=t.label){let e=this.findChessByLabel(o.label);if(console.log("srcIndex-destIndex",a+","+e),console.log("srcObj.lastEmpty",t.lastEmpty),"lastEmpty"in t||(t.lastEmpty=a),e==t.lastEmpty||0==e||e==this.allPosition.length-1)return;console.log("lastEmpty",t.lastEmpty),this.moveTo(o.rect,this.allPosition[t.lastEmpty]);let s=o.sort;o.sort=t.sort,t.sort=s,console.log("交换顺序"),console.log("obj.sort",o.sort),console.log("srcObj.sort",t.sort),t.lastEmpty=e}}),this.canvas.on("selection:updated",e=>{e.target.left2=e.target.left,e.target.top2=e.target.top,console.log("selection",e.target.name),this.isScroll=!1}),this.canvas.on("selection:created",e=>{e.selected.length,e.target.left2=e.target.left,e.target.top2=e.target.top,this.isScroll=!1,console.log("selection",e.target.name)})},startClock(){this.endClock(),this.startTime=Date.now(),this.showTime="00:00",this.colock_timer=setInterval(()=>{let e=Math.round((Date.now()-this.startTime)/1e3),t=Math.floor(e/60),s=e%60;t=t<10?"0"+t:t,s=s<10?"0"+s:s,this.showTime=`${t}:${s}`,this.clocker.set({text:this.showTime}),this.canvas.renderAll()},1e3)},endClock(){clearInterval(this.colock_timer)},showTutorial(){const e=this,t=3e3,s=window.localStorage,i="hue_game_tutorial";fabric.Image.fromURL(e.ImgBasePath+e.arrowImgPath,a=>{a.set({selectable:!1,opacity:.3,left:this.center.x,top:this.center.y}),a.scale(this.options.width/3/a.width),this.canvas.add(a),a.animate("angle","+=360",{onChange:e.canvas.renderAll.bind(e.canvas),duration:t,easing:fabric.util.ease.easeInOutCirc}),setTimeout(()=>{e.canvas.remove(a),s.getItem(i)?s.setItem(i,parseInt(s.getItem(i))+1):s.setItem(i,"1")},t+400)})}}};var p={mixins:[o["a"],n["a"],m],data(){return{path:"/game/handler/HueTest.aspx",pagePath:"/huetest",chessRight:[],chessWet:[],showingChess:[],level:1,maxLevel:4,state:0,ChessCount:20,Weakness:["红黄","黄绿","绿蓝","蓝红"],allScore:0,initScore:0,grade:"",showLabel:!1,showScore:!1,chessMove:!0,pagePadding:30,pageWidth:355,chessSize:30,canvasId:"canvasId",levelScore:[],allScore:0,showScore:0,topscore:0,refreshSeconds:10,refreshIntval:10,refreshSeconds_Handle:0,gameIsPost:!1,gradeCount:[],weekHero:[]}},watch:{state:function(e){1==e&&this.testLogin()}},computed:{isLocal(){return-1!=location.host.indexOf("localhost")},levelIndex(){return this.level-1},canvasStyle(){return{margin:"0 auto",width:this.pageWidth+"px "}},prevBtnColor(){if(this.showingChess.length>0)return{visibility:1==this.level?"hidden":"visible"}},nextBtnColor(){if(this.showingChess.length>0)return{visibility:this.level==this.maxLevel?"hidden":"visible"}}},methods:{init(){const e=this;e.state=1,e.level=1,e.grade="",e.chessMove=!0,e.showLabel=!1,e.gameIsPost=!1,e.initScore=0,e.chessWet.length=0;for(let t=0;t<e.chessRight.length;t++){let s=l.RandDom(e.chessRight[t].concat());e.chessWet.push(s),e.initScore+=l.calcScore(s)}console.log("initScore",e.initScore),e.startClock(),e.renderLevel(this.level),window.localStorage.getItem("hue_game_tutorial")},prev(){if(this.level<=1)return;let e=this.level-1;this.renderLevel(e)},next(){if(this.level>=this.maxLevel)return;let e=this.level+1;this.renderLevel(e)},submit(){const e=this;e.state=2,e.endClock();let t=[];for(let s=0;s<this.chessWet.length;s++){e.levelScore[s]=l.calcScore(this.chessWet[s]);for(let e=0;e<this.chessWet[s].length;e++)t.push(this.chessWet[s][e])}this.allScore=l.calcScore(t),t.sort((e,t)=>e.label-t.label),e.renderResult({eleId:this.canvasId,chess:t,width:this.pageWidth,chessMove:!1,showLabel:!0,showScore:!1,chessSize:10}),e.showScore=e.changeScore(),e.gameIsPost||$.get(e.path,{action:"postRank",glevel:e.allScore,wrong:e.initScore,times:Math.round((Date.now()-this.startTime)/1e3)},(function(t){if(e.gameIsPost=!0,e.mine=!0,e.login_headImg=t.headimgurl,e.topscore=t.topscore,t.ticket){let t={title:`我通过了颜色分辨力测试(${e.showScore}分)，你也来试试`};this.share(t)}})),this.refreshIntval=this.refreshSeconds,this.refreshSeconds_Handle=setInterval(()=>{this.refreshIntval<=0&&(clearInterval(this.refreshSeconds_Handle),this.getAllRank(),this.refreshSeconds_Handle=0,this.refreshIntval=0),this.refreshIntval--},1e3),e.getAllRank(),e.Remark()},showWelcome(){this.state=0;let e=[],t=[],s=["#AB756D","#95894C","#8E8F57","#549988","#52968C","#7985A2","#8489A6","#A97375"],i=["#dbca6e","#d9938b","#7ce0c6","#7ce0c6"];s.forEach(t=>{e.push({label:"",color:t})}),i.forEach(e=>{t.push({label:"",color:e})}),this.renderWelCome({eleId:this.canvasId,chess:e,chess2:t,width:this.pageWidth,chessMove:!1,showLabel:!1,showScore:!1,chessSize:16},()=>{this.init()})},showWrong(){this.state=3,this.level=1,this.showLabel=!0,this.chessMove=!1,this.renderLevel(this.level)},getAllRank:function(){var e=this;0!=e.refreshSeconds_Handle&&$.get(e.path,{action:"getAllRank"},(function(t){e.gradeCount=t.gradeCount,e.weekHero=t.weekHero}))},weaknessText(){if(0==this.allScore)return"";let e=fabric.util.array.max(this.levelScore),t=this.levelScore.indexOf(e);return`您的${this.Weakness[t]}色偏弱`},Remark(){var e=this.allScore;let t="",s="";return 0==e?(s="最强王者",t="是色彩领域的最强王者，举世无双！"):e<=8?(s="堪比毕加索",t="是世界前3%水准的非常优秀的色彩感觉持有者。你的色彩层次感非常的优秀，各种颜色对你都有特殊的意义，你的审美水平也超越了一般人。你可以运用在色彩世界里的优势，继续探索，创造出充满想象力的新东西"):e<=12?(s="美术学院学生级的色感",t="拥有美术学院学生级的色感，你看待事物可以看到常人无法看到的角度，找到属于你自己的美丽。你知道各种存在于世界的色彩之美，也懂得如何通过自己的个性表达。你拥有超越常人的灵敏度和丰富和创造性，一定要继续加油表现自己的各种思想和丰富的想象力啊"):e<=20?(s="突出的色感",t="具有色彩专家级别的，就好像著名画家毕加索和梵高，可以轻松与各种颜色打交道的色彩感觉持有者。 你对于色彩的个性很有感觉，你也总是为平时看到的不够高明的颜色选择感到遗憾。另外，你微妙感性的个性也让你可以和周围的人形成一个平稳的关系。你对事物拥有详细的观察分析能力、领导能力、适应力和创新力。"):e<=60?(s="良好的辨别力",t="拥有着比一般人更加突出的色感！"):(s="低于平均水平",t="拥有着一般人的色感"),this.grade=s,s+"，"+t},renderLevel(e){const t=this;e<=this.maxLevel&&(this.level=e,this.showingChess=this.chessWet[this.levelIndex],t.render({eleId:this.canvasId,chess:this.showingChess,width:this.pageWidth,chessMove:this.chessMove,showLabel:this.showLabel,chessSize:this.chessSize}))},autoSort(){window.localStorage.setItem("hue_game_tutorial","0");for(let e=0;e<this.chessWet.length;e++)this.chessWet[e].sort((e,t)=>e.label-t.label);l.calcScore(this.showingChess),this.renderLevel(this.level)},openTip(){this.showLabel=!0,this.showScore=!0,this.renderLevel(this.level)},closeTip(){this.showLabel=!1,this.showScore=!1,this.renderLevel(this.level)},share(e){e.link=window.location.href,e.imgUrl="https://static.qtccolor.com/game/img/hue_test_ico.jpg",e.desc="10分钟内重组调色盘的颜色排序，挑战色觉分辨颜色能力！",this.$wxShare.updateWxShareConfig(e)},changeScore(){var e=Math.round(900*(1-this.allScore/this.initScore)),t=0,s=Math.round((Date.now()-this.startTime)/1e3),i=s/480;return s<180&&this.allScore<20&&(i=0),i<=1&&e>0&&(t=Math.round(100*(1-i))),e+t}},mounted(){const e=this;e.chessRight=l.getChess(e.ChessCount),e.pagePadding=30,e.pageWidth=window.innerWidth-20,e.pageWidth=Math.min(355,e.pageWidth),setTimeout(()=>{e.showWelcome()},100),document.body.className="black",document.title="在线版色棋";let t={title:"在线版色棋测试，挑战你的色觉分辨颜色能力！"};this.share(t)}},f=p,v=(s("24ed"),s("2877")),b=Object(v["a"])(f,i,a,!1,null,"ecc7d95c",null);t["default"]=b.exports},"24e0":function(e,t,s){},"24ed":function(e,t,s){"use strict";s("b86c")},"2cbc":function(e,t,s){},"34fc":function(e,t,s){"use strict";s("2cbc")},"3d01":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"game-nav"}},[s("ul",{staticClass:"nav game-nav"},[e._m(0),e._m(1),s("li",{staticClass:"dropdown",on:{click:e.dropdown}},[e._m(2),s("ul",{staticClass:"dropdown-menu",style:e.secondMenuStyle},[s("li",[s("router-link",{attrs:{to:"/"}},[e._v("全部游戏")])],1),s("li",[s("router-link",{attrs:{to:"/pixels"}},[e._v("颜色分辨力测试")])],1),s("li",[s("router-link",{attrs:{to:"/rgb"}},[e._v("RGB敏感度挑战")])],1),s("li",[s("router-link",{attrs:{to:"/huetest"}},[e._v("在线版色棋")])],1)])])])])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"https://m.qtccolor.com/"}},[e._v("色彩商店")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"https://www.qtccolor.com/secaiku/index?key=weixin&s=game"}},[e._v("色彩查询")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",[e._v("色彩游戏"),s("span",{staticClass:"caret"})])}],o={data(){return{secondMenuStyle:{display:"none"}}},methods:{dropdown(){console.log("aa"),"none"==this.secondMenuStyle.display?this.secondMenuStyle.display="block":this.secondMenuStyle.display="none"}}},n=o,r=(s("45cf"),s("2877")),l=Object(r["a"])(n,i,a,!1,null,null,null);t["a"]=l.exports},"45cf":function(e,t,s){"use strict";s("a55b")},"69d6":function(e,t,s){"use strict";s("24e0")},"7e6f":function(e,t,s){"use strict";s.d(t,"a",(function(){return v}));var i=s("3d01"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{attrs:{id:"rewardPage"}},[s("el-drawer",{attrs:{"append-to-body":!0,visible:e.isShowReward,"show-close":!0,"custom-class":"my-drawer",title:"打赏",direction:"btt",size:"340"},on:{"update:visible":function(t){e.isShowReward=t},opened:e.init,closed:e.closed}},[s("div",[s("div",{staticClass:"reward-amounts margintop1"},e._l(e.quick_amount,(function(t,i){return s("div",{key:i,staticClass:"reward-amounts-item"},[s("div",{class:["cbutton",e.selectedIndex==i?"select":""],on:{click:function(t){return e.select(i)}}},[e._v(e._s(t)+"元")]),s("span",[e._v(e._s(e.quick_tip[i]))])])})),0),s("div",{staticClass:" margintop2 center "},[s("div",{staticClass:"double ctrl-button"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"amount"}],staticClass:"reward-input ctrl-button   hideoff",attrs:{id:"inputAmount",type:"number",round:"",placeholder:"请输入金额"},domProps:{value:e.amount},on:{input:function(t){t.target.composing||(e.amount=t.target.value)}}}),e.inputAmount?e._e():s("el-button",{staticClass:"ctrl-button  ",attrs:{type:"default",round:""},on:{click:e.otherAmount}},[e._v("自定义金额")])],1),s("el-button",{staticClass:"ctrl-button",attrs:{type:"primary",round:""},on:{click:function(t){return e.makeorder(e.amount)}}},[e._v("立即打赏")]),s("div",{staticClass:"ft_Primary"},[e._v("感谢你的打赏，你的支持是我们的动力")])],1)])]),s("div",{staticClass:"center pointer flexcenter "},[s("div",{staticClass:"gameicon",on:{click:e.openReward}},[s("i",{staticClass:"iconfont icondashang"}),s("span",[e._v("打赏")])])]),s("br"),s("el-dialog",{attrs:{title:"支付结果",visible:e.PayResultOption.show,"custom-class":"PayResultOptionWindow","append-to-body":"",fullscreen:""},on:{"update:visible":function(t){return e.$set(e.PayResultOption,"show",t)}}},[s("PayResult",{attrs:{option:e.PayResultOption}})],1)],1)},o=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{attrs:{id:"PayResultPage"}},[s("div",{staticClass:"head"},[s("i",{staticClass:"iconfont iconzhifuchenggong"}),s("span",{staticClass:"text"},[s("span",{staticClass:"state"},[e._v(e._s(e.option.order.state))]),s("span",[e._v(e._s(e.option.title))])])]),e._m(0),e.option.showClose?s("div",{staticClass:"center margintop3",on:{click:e.close}},[s("el-button",[e._v("关闭")])],1):e._e()])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"qrcode"},[s("img",{attrs:{src:"//static.qtccolor.com/template/2017/images2/qrcode_xiadanhou.jpg"}}),s("p",{staticClass:"center"},[e._v(" 关注公众号，实时查询色彩"),s("br"),e._v(" 随时随地获取分享更多资讯 ")])])}],l={props:{option:{type:Object,require:!0,default(){return{show:!0,title:"感谢您给我们的鼓励！",showClose:!0,order:{orderid:"",state:"支付成功！"}}}}},methods:{close(){this.option.show=!1}}},c=l,h=(s("69d6"),s("2877")),d=Object(h["a"])(c,n,r,!1,null,null,null),u=d.exports,g={props:{},components:{PayResult:u},data(){return{quick_amount:[3,5,10],quick_tip:["继续加油哦~","努力向前冲~","你们是最棒哒~"],myOrders:{},selectedIndex:0,amount:10,inputAmount:!1,title:"请选择金额",checkTimer:0,isShowReward:!1,showNumberKeyboard:!1,PayResultOption:{show:!1,title:"",showClose:!0,order:{orderid:"",state:"支付成功！"}}}},watch:{inputAmount(e){this.title=e?"请输入金额":"请选择金额"},amount(e){this.amount=Math.max(1,parseInt(e)),this.amount=Math.min(1e4,this.amount)}},beforeDestroy(){clearInterval(this.checkTimer)},methods:{otherAmount(){this.inputAmount=!0;let e=document.getElementById("inputAmount");e.className=e.className.replace("hideoff",""),e.focus()},select(e){this.selectedIndex=e,this.amount=this.quick_amount[e]},makeorder(e){const t=this;0!=e&&(e||(t.$alert("请输入金额"),this.inputAmount&&document.getElementById("inputAmount").focus()),t.myOrders[e]?t.pay(t.myOrders[e]):$.get("/webapi/reward/Order",{amount:e},s=>{if(s.success){var i=s.data;t.myOrders[e]=i.OrderId,t.pay(i.OrderId)}}))},pay(e){const t=this;t.$isPc?t.$global.url.qtc:t.$global.url.mobile;let s=t.$isMobile?1:0,i=t.$global.rewardPayType;clearInterval(t.checkTimer),window.open(`/webapi/reward/pay?orderId=${e}&isMobile=${s}&paytypeid=${i}`),t.checkTimer=setInterval(()=>{t.$request.get("/reward/checkOrderPayState",{orderId:e}).then(e=>{e.data.success&&(clearInterval(t.checkTimer),t.myOrders={},t.PayResultOption.show=!0,t.PayResultOption.title="感谢您的支持与鼓励",t.$emit("closed"))})},3e3)},init(){this.inputAmount=!1},closed(){clearInterval(this.checkTimer)},openReward(){this.isShowReward=!0},otherAmount(){this.inputAmount=!0}},created(){}},m=g,p=(s("34fc"),Object(h["a"])(m,a,o,!1,null,null,null)),f=p.exports;const v={components:{NavTag:i["a"],RewardTag:f},data(){return{}}}},a55b:function(e,t,s){},a78e:function(e,t,s){var i,a;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(o){var n;if(i=o,a="function"===typeof i?i.call(t,s,t,e):i,void 0===a||(e.exports=a),n=!0,e.exports=o(),n=!0,!n){var r=window.Cookies,l=window.Cookies=o();l.noConflict=function(){return window.Cookies=r,l}}})((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var s=arguments[e];for(var i in s)t[i]=s[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function s(i){function a(){}function o(t,s,o){if("undefined"!==typeof document){o=e({path:"/"},a.defaults,o),"number"===typeof o.expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var n=JSON.stringify(s);/^[\{\[]/.test(n)&&(s=n)}catch(c){}s=i.write?i.write(s,t):encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var r="";for(var l in o)o[l]&&(r+="; "+l,!0!==o[l]&&(r+="="+o[l].split(";")[0]));return document.cookie=t+"="+s+r}}function n(e,s){if("undefined"!==typeof document){for(var a={},o=document.cookie?document.cookie.split("; "):[],n=0;n<o.length;n++){var r=o[n].split("="),l=r.slice(1).join("=");s||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(r[0]);if(l=(i.read||i)(l,c)||t(l),s)try{l=JSON.parse(l)}catch(h){}if(a[c]=l,e===c)break}catch(h){}}return e?a[e]:a}}return a.set=o,a.get=function(e){return n(e,!1)},a.getJSON=function(e){return n(e,!0)},a.remove=function(t,s){o(t,"",e(s,{expires:-1}))},a.defaults={},a.withConverter=s,a}return s((function(){}))}))},b596:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var i=s("a78e"),a=s.n(i);const o=window.sessionStorage,n={data(){return{pageLoging:!1,login_nickName:"",login_headImg:"",mine:!1}},methods:{testLogin(e){let t=this,s=a.a.get("openid");-1!=location.host.indexOf("localhost")||s||(t.pageLoging=!0,t.$message.success("正在登录..."),$.get(t.path,{action:"testLogin"},(function(s){"0"==s||0==s?(o.setItem("logingpage",t.pagePath),setTimeout(()=>{location.href=t.path+"?action=login&from="+encodeURIComponent("/Game/app/")},50)):(t.pageLoging=!1,o.setItem("logined","1"),t.login_nickName=s.nickname,t.login_headImg=s.headimgurl),e&&e()})))}}}},b86c:function(e,t,s){}}]);